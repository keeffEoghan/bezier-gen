# `glsl-bezier`

GLSL bezier curve functions and Node code generator - for functions with any `mix`-able type/dimension, and any number of control points.

## Usage

### Bezier Functions

This module produces a series of GLSL bezier functions, for each of the given numbers of segments `S`, and overloaded for each of the given types `T`, named `name`, with the signature:
```glsl
T name(in T cp0, in T cp1, ..., in T cpS, in float t);
```

The bezier functions may be called as follows (using functions in the pre-generated [`index.glsl`](./index.glsl) for example):
```glsl
float interpolated = bezier(0.0, 1.0, 2.0, 0.5); // 1.0
vec2 interpolated = bezier(vec2(0.0), vec2(1.0), vec2(2.0), 0.5); // vec2(1.0)
```

### Generating

You can use the pre-generated [`index.glsl`](./index.glsl) file, or generate your own bezier functions using the generator files:

Using [`bin`](./bin) for command-line:
```bash
# These are equivalent:

# Long form:
glsl-bezier/bin --segments 1 2 3 4 --types float vec2 vec3 vec4 --name bezier --output ./bezier.glsl

# Short form:
glsl-bezier/bin -s 1 2 3 4 -t float vec2 vec3 vec4 -n bezier -o ./bezier.glsl

# Defaults (outputs to console if no `output` file is given):
glsl-bezier/bin
```

Using [`index.js`](./index.js) for Node or JavaScript:
```javascript
import { makeBezier, makeBeziers } from 'glsl-bezier';

makeBezier(3, 'vec2', 'myBezier') === `
/** GLSL generated by \`glsl-bezier\` */

vec2 myBezier(in vec2 cp0, in vec2 cp1, in vec2 cp2, in float t) {
    p0 = mix(p0, p1, t);
    p1 = mix(p1, p2, t);
    p2 = mix(p2, p3, t);

    vec2 p0 = mix(cp0, cp1, t);
    vec2 p1 = mix(cp1, cp2, t);

    return mix(p0, p1, t);
}

/** End of GLSL generated by \`glsl-bezier\` */
`

makeBeziers([3, 4], ['float', 'vec2'], 'myBeziers') === `
/** GLSL generated by \`glsl-bezier\` */

float moreBezier(in float cp0, in float cp1, in float cp2, in float t) {
    p0 = mix(p0, p1, t);
    p1 = mix(p1, p2, t);
    p2 = mix(p2, p3, t);

    float p0 = mix(cp0, cp1, t);
    float p1 = mix(cp1, cp2, t);

    return mix(p0, p1, t);
}

float moreBezier(in float cp0, in float cp1, in float cp2, in float cp3, in float t) {
    p0 = mix(p0, p1, t);
    p1 = mix(p1, p2, t);
    p2 = mix(p2, p3, t);
    p3 = mix(p3, p4, t);

    float p0 = mix(cp0, cp1, t);
    float p1 = mix(cp1, cp2, t);
    float p2 = mix(cp2, cp3, t);

    p0 = mix(p0, p1, t);
    p1 = mix(p1, p2, t);

    return mix(p0, p1, t);
}


vec2 moreBezier(in vec2 cp0, in vec2 cp1, in vec2 cp2, in float t) {
    p0 = mix(p0, p1, t);
    p1 = mix(p1, p2, t);
    p2 = mix(p2, p3, t);

    vec2 p0 = mix(cp0, cp1, t);
    vec2 p1 = mix(cp1, cp2, t);

    return mix(p0, p1, t);
}

vec2 moreBezier(in vec2 cp0, in vec2 cp1, in vec2 cp2, in vec2 cp3, in float t) {
    p0 = mix(p0, p1, t);
    p1 = mix(p1, p2, t);
    p2 = mix(p2, p3, t);
    p3 = mix(p3, p4, t);

    vec2 p0 = mix(cp0, cp1, t);
    vec2 p1 = mix(cp1, cp2, t);
    vec2 p2 = mix(cp2, cp3, t);

    p0 = mix(p0, p1, t);
    p1 = mix(p1, p2, t);

    return mix(p0, p1, t);
}

/** End of GLSL generated by \`glsl-bezier\` */
`
```

## See Also

- [`bezier`](https://github.com/hughsk/bezier)
